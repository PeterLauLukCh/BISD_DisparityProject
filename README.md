# Disparity Calculation Result of Raking-based Bayesian Improved Surname Geocoding (BISG) Model

The project is primarily based on the result from Dr. Philip Greengard and Dr. Andrew Gelman's research *BISG: When inferring race or ethnicity, does it matter that people often live near their relatives?* (https://arxiv.org/pdf/2304.09126.pdf), aiming to estimate the specific number of voters in each race.

Through the raking-based BISD model, given a person's family name and geolocation information, we can calculate the probability of this person's ethnicity. For example, with the information of person $x$'s surname and home location, we can calculate $Pr(x$ is White), $Pr(x$ is Asian), $Pr(x$ is Black), and so on. Consider a set of voters $X$, which contains $x_{1}, x_{2}, ..., x_{n}$, the estimated number of Whites would be:

<p align="center">
$\text{Num of White} = E(x_1 \text{ is white}) + E(x_2 \text{ is white}) + \ldots + E(x_n \text{ is white})$
</p>

<p align="center">
$\text{Num of White} = Pr(x_1 \text{ is white}) + Pr(x_2 \text{ is white}) + \ldots + Pr(x_n \text{ is white})$
</p>

Now, given a set of surnames $Y$, which contains $y_{1}, y_{2}, ..., y_{n}$, each $y_{i}$ contains its frequency, $fr(y_{i})$, and the corresponding probability of being each race. Therefore,

<p align="center">
$\text{Num of White} = fr(y_{1})\cdot Pr(y_1 \text{ is white}) + fr(y_{2})\cdot Pr(y_2 \text{ is white}) + \ldots + fr(y_{n})\cdot Pr(y_n \text{ is white})$
</p>

## Disparity Calculator
This folder contains 2 files: "Names_2010Census.csv" and "disparity_calculator.py". 

The disparity calculator will read column C of Names_2010Census.csv as the frequency of a set of surnames $Y$ and columns F to K as the probabilities for a surname $y_{i}$ to belong to six different races. By applying the formula derived above, the program will output estimates for the number of voters in six different racial categories.

The "Names_2010Census" file contains results generated by the Ranking-based BISG method. Column A represents a set of voters' surnames, Column B indicates the rank based on frequency, Column C shows the frequency of the name, Column D displays the proportion of the surname per 100,000 voters, and Column E represents the cumulative proportion. Columns F to K contain the probabilities of a name belonging to different racial categories: white, black, API, AIAN, 2-races (more than 2 races), and Hispanic, respectively.
